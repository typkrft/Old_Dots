#!/bin/bash
# S K E T C H Y  B A R

# NOTES: If you don't specify associated display the icon_highlight_color doesn't 
# work. Padding seems to only work betwen the elements of the item/component and
# not between the other items, because of this it seems that you need to add 
# seperators

# TODO: Not exactly sure how to handle new spaces maybe a yabai signal that creates
# removes that spaces from the bar. Not sure how I would move the window title if or
# other spaces/items around. 
# TODO: Update Plugins to match new space names.
# TODO: Create Reminders Plugin
# TODO: Create Calendar Plugin
# TODO: Update Colorscheme
# TODO: Add conditional modules. Could make a bar mode in skhd then add various plugins, reload whole bar
  # when you want to remove them

# P Y W A L
. $HOME/.cache/wal/colors.sh

# B A R  O P T S
sketchybar -m config height                            26
sketchybar -m config padding_left                      10
sketchybar -m config padding_right                     10
sketchybar -m config bar_color                         0xF0${background:1}
sketchybar -m config display                           all

# L E F T
# M O D A L  I N D I C A T O R 
sketchybar -m add item modal                           left 
sketchybar -m set modal label                          [N]
sketchybar -m set modal label_font                     "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set modal label_color                    0xFF${color3:1}
sketchybar -m set modal label_padding_left             4
sketchybar -m set modal label_padding_right            4
# sketchybar -m set modal associated_space               1 
# sketchybar -m set modal associated_display         1

sketchybar -m add item modal_sep                       left
sketchybar -m set modal_sep label_font                 "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set modal_sep label_padding_left         4
sketchybar -m set modal_sep label_padding_right        4

# S P A C E  1  -  H O M E
sketchybar -m add component space home                 left
sketchybar -m set home associated_space                1   
sketchybar -m set home associated_display              1
sketchybar -m set home icon                            ﮟ
sketchybar -m set home icon_font                       "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set home icon_color                      0xFF${color3:1}
sketchybar -m set home icon_highlight_color            0xFF${foreground:1}
sketchybar -m set home icon_padding_left               4
sketchybar -m set home icon_padding_right              4
sketchybar -m set home click_script                    "yabai -m space --focus 1"

sketchybar -m add item home_sep                        left
sketchybar -m set home_sep label_font                  "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set home_sep label_padding_left          4
sketchybar -m set home_sep label_padding_right         4

# S P A C E  2  -  C O M M S
sketchybar -m add component space comms                left
sketchybar -m set comms associated_space               2   
sketchybar -m set comms associated_display             1
sketchybar -m set comms icon                           
sketchybar -m set comms icon_font                      "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set comms icon_color                     0xFF${color3:1}
sketchybar -m set comms icon_highlight_color           0xFF${foreground:1}
sketchybar -m set comms icon_padding_left              4
sketchybar -m set comms icon_padding_right             4
sketchybar -m set comms click_script                   "yabai -m space --focus 2"

sketchybar -m add item comms_sep                       left
sketchybar -m set comms_sep label_font                 "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set comms_sep label_padding_left         4
sketchybar -m set comms_sep label_padding_right        4

# S P A C E  3  -  M U S I C
sketchybar -m add component space music                left
sketchybar -m set music associated_space               3   
sketchybar -m set music associated_display             1
sketchybar -m set music icon                           
sketchybar -m set music icon_font                      "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set music icon_color                     0xFF${color3:1}
sketchybar -m set music icon_highlight_color           0xFF${foreground:1}
sketchybar -m set music icon_padding_left              4
sketchybar -m set music icon_padding_right             4
sketchybar -m set music click_script                   "yabai -m space --focus 3"

sketchybar -m add item music_sep                       left
sketchybar -m set music_sep label_font                 "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set music_sep label_padding_left         4
sketchybar -m set music_sep label_padding_right        4

# S P A C E  4  -  I N V E S T M E N T S
sketchybar -m add component space invest               left
sketchybar -m set invest associated_space              4   
sketchybar -m set invest associated_display            1
sketchybar -m set invest icon                          
sketchybar -m set invest icon_font                     "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set invest icon_color                    0xFF${color3:1}
sketchybar -m set invest icon_highlight_color          0xFF${foreground:1}
sketchybar -m set invest icon_padding_left             4
sketchybar -m set invest icon_padding_right            4
sketchybar -m set invest click_script                  "yabai -m space --focus 4"

sketchybar -m add item invest_sep                      left
sketchybar -m set invest_sep label_font                "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set invest_sep label_padding_left        4
sketchybar -m set invest_sep label_padding_right       4

# S P A C E  5  -  M I S C
sketchybar -m add component space misc                 left
sketchybar -m set misc associated_space                5   
sketchybar -m set misc associated_display              1
sketchybar -m set misc icon                            
sketchybar -m set misc icon_font                       "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set misc icon_color                      0xFF${color3:1}
sketchybar -m set misc icon_highlight_color            0xFF${foreground:1}
sketchybar -m set misc icon_padding_left               4
sketchybar -m set misc icon_padding_right              4
sketchybar -m set misc click_script                    "yabai -m space --focus 5"

sketchybar -m add item misc_sep                        left
sketchybar -m set misc_sep label_font                  "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set misc_sep label_padding_left          0
sketchybar -m set misc_sep label_padding_right         0

# W I N D O W  T I T L E 
sketchybar -m add item title                           left
sketchybar -m set title label_font                     "Iosevka Nerd Font:Mono:16.0"
sketchybar -m set title label_color                    0xFF${foreground:1}
sketchybar -m set title label_padding_left             4
sketchybar -m set title label_padding_right            4
sketchybar -m set title script                         "$HOME/.dotfiles/sketchybar/plugins/window_title.sh"
sketchybar -m subscribe title window_focus
sketchybar -m subscribe title front_app_switched
sketchybar -m subscribe title space_change
sketchybar -m subscribe title title_change
# sketchybar -m set title associated_space             5   
# sketchybar -m set title associated_display           1
# sketchybar -m set title icon                         
# sketchybar -m set title click_script                 "yabai -m space --focus 5"

# R I G H T 
# B A T T E R Y 
sketchybar -m add item battery                         right
sketchybar -m set battery update_freq                  10
sketchybar -m set battery icon_font                    "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set battery icon_color                   0xFF${color3:1}
sketchybar -m set battery icon_padding_left            4
sketchybar -m set battery icon_padding_right           4
sketchybar -m set battery label_font                   "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set battery label_color                  0xFF${foreground:1}
sketchybar -m set battery label_padding_left           4
sketchybar -m set battery label_padding_right          4
sketchybar -m set battery script                       "~/.config/sketchybar/plugins/power.sh"
# sketchybar -m set battery icon                         
# sketchybar -m set battery label                          [N]
# sketchybar -m set battery associated_space               1 
# sketchybar -m set battery associated_display         1

sketchybar -m add item battery_sep                     left
sketchybar -m set battery_sep label_font               "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set battery_sep label_padding_left       4
sketchybar -m set battery_sep label_padding_right      4

# C L O C K 
sketchybar -m add item clock                           right 
sketchybar -m set clock icon                           
sketchybar -m set clock icon_font                      "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set clock icon_color                     0xFF${color3:1}
sketchybar -m set clock icon_padding_left              4
sketchybar -m set clock icon_padding_right             4
sketchybar -m set clock label_font                     "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set clock label_color                    0xFF${foreground:1}
sketchybar -m set clock label_padding_left             4
sketchybar -m set clock label_padding_right            4
sketchybar -m set clock script                         "~/.config/sketchybar/plugins/clock.sh"
# sketchybar -m set clock label                          [N]
# sketchybar -m set clock associated_space               1 
# sketchybar -m set clock associated_display             1

sketchybar -m add item clock_sep                       left
sketchybar -m set clock_sep label_font                 "Iosevka Nerd Font:Bold:16.0"
sketchybar -m set clock_sep label_padding_left         4
sketchybar -m set clock_sep label_padding_right        4





# D O N E
sketchybar -m update
echo "sketchybar configuration loaded.."
